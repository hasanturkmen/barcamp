/*
 * jQuery Cycle Plugin (core engine)
 * Examples and documentation at: http://jquery.malsup.com/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version: 2.88 (08-JUN-2010)
 * Dual licensed under the MIT and GPL licenses.
 * http://jquery.malsup.com/license.html
 * Requires: jQuery v1.2.6 or later
 */(function(e){function n(t){e.fn.cycle.debug&&r(t)}function r(){window.console&&window.console.log&&window.console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function i(t,n,i){function a(t,n,i){if(!t&&n===!0){var o=e(i).data("cycle.opts");if(!o){r("options not found, can not resume");return!1}if(i.cycleTimeout){clearTimeout(i.cycleTimeout);i.cycleTimeout=0}c(o.elements,o,1,!s.rev&&!s.backwards)}}t.cycleStop==undefined&&(t.cycleStop=0);if(n===undefined||n===null)n={};if(n.constructor==String){switch(n){case"destroy":case"stop":var s=e(t).data("cycle.opts");if(!s)return!1;t.cycleStop++;t.cycleTimeout&&clearTimeout(t.cycleTimeout);t.cycleTimeout=0;e(t).removeData("cycle.opts");n=="destroy"&&o(s);return!1;case"toggle":t.cyclePause=t.cyclePause===1?0:1;a(t.cyclePause,i,t);return!1;case"pause":t.cyclePause=1;return!1;case"resume":t.cyclePause=0;a(!1,i,t);return!1;case"prev":case"next":var s=e(t).data("cycle.opts");if(!s){r('options not found, "prev/next" ignored');return!1}e.fn.cycle[n](s);return!1;default:n={fx:n}}return n}if(n.constructor==Number){var u=n;n=e(t).data("cycle.opts");if(!n){r("options not found, can not advance slide");return!1}if(u<0||u>=n.elements.length){r("invalid slide index: "+u);return!1}n.nextSlide=u;if(t.cycleTimeout){clearTimeout(t.cycleTimeout);t.cycleTimeout=0}typeof i=="string"&&(n.oneTimeFx=i);c(n.elements,n,1,u>=n.currSlide);return!1}return n}function s(t,n){if(!e.support.opacity&&n.cleartype&&t.style.filter)try{t.style.removeAttribute("filter")}catch(r){}}function o(t){t.next&&e(t.next).unbind(t.prevNextEvent);t.prev&&e(t.prev).unbind(t.prevNextEvent);(t.pager||t.pagerAnchorBuilder)&&e.each(t.pagerAnchors||[],function(){this.unbind().remove()});t.pagerAnchors=null;t.destroy&&t.destroy(t)}function u(t,n,i,o,u){var h=e.extend({},e.fn.cycle.defaults,o||{},e.metadata?t.metadata():e.meta?t.data():{});h.autostop&&(h.countdown=h.autostopCount||i.length);var p=t[0];t.data("cycle.opts",h);h.$cont=t;h.stopCount=p.cycleStop;h.elements=i;h.before=h.before?[h.before]:[];h.after=h.after?[h.after]:[];h.after.unshift(function(){h.busy=0});!e.support.opacity&&h.cleartype&&h.after.push(function(){s(this,h)});h.continuous&&h.after.push(function(){c(i,h,0,!h.rev&&!h.backwards)});a(h);!e.support.opacity&&h.cleartype&&!h.cleartypeNoBg&&m(n);t.css("position")=="static"&&t.css("position","relative");h.width&&t.width(h.width);h.height&&h.height!="auto"&&t.height(h.height);h.startingSlide?h.startingSlide=parseInt(h.startingSlide):h.backwards&&(h.startingSlide=i.length-1);if(h.random){h.randomMap=[];for(var g=0;g<i.length;g++)h.randomMap.push(g);h.randomMap.sort(function(e,t){return Math.random()-.5});h.randomIndex=1;h.startingSlide=h.randomMap[1]}else h.startingSlide>=i.length&&(h.startingSlide=0);h.currSlide=h.startingSlide||0;var y=h.startingSlide;n.css({position:"absolute",top:0,left:0}).hide().each(function(t){var n;h.backwards?n=y?t<=y?i.length+(t-y):y-t:i.length-t:n=y?t>=y?i.length-(t-y):y-t:i.length-t;e(this).css("z-index",n)});e(i[y]).css("opacity",1).show();s(i[y],h);h.fit&&h.width&&n.width(h.width);h.fit&&h.height&&h.height!="auto"&&n.height(h.height);var b=h.containerResize&&!t.innerHeight();if(b){var w=0,E=0;for(var S=0;S<i.length;S++){var x=e(i[S]),T=x[0],N=x.outerWidth(),C=x.outerHeight();N||(N=T.offsetWidth||T.width||x.attr("width"));C||(C=T.offsetHeight||T.height||x.attr("height"));w=N>w?N:w;E=C>E?C:E}w>0&&E>0&&t.css({width:w+"px",height:E+"px"})}h.pause&&t.hover(function(){this.cyclePause++},function(){this.cyclePause--});if(f(h)===!1)return!1;var k=!1;o.requeueAttempts=o.requeueAttempts||0;n.each(function(){var t=e(this);this.cycleH=h.fit&&h.height?h.height:t.height()||this.offsetHeight||this.height||t.attr("height")||0;this.cycleW=h.fit&&h.width?h.width:t.width()||this.offsetWidth||this.width||t.attr("width")||0;if(t.is("img")){var n=e.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete,i=e.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete,s=e.browser.opera&&(this.cycleW==42&&this.cycleH==19||this.cycleW==37&&this.cycleH==17)&&!this.complete,a=this.cycleH==0&&this.cycleW==0&&!this.complete;if(n||i||s||a){if(u.s&&h.requeueOnImageNotLoaded&&++o.requeueAttempts<100){r(o.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){e(u.s,u.c).cycle(o)},h.requeueTimeout);k=!0;return!1}r("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}return!0});if(k)return!1;h.cssBefore=h.cssBefore||{};h.animIn=h.animIn||{};h.animOut=h.animOut||{};n.not(":eq("+y+")").css(h.cssBefore);h.cssFirst&&e(n[y]).css(h.cssFirst);if(h.timeout){h.timeout=parseInt(h.timeout);h.speed.constructor==String&&(h.speed=e.fx.speeds[h.speed]||parseInt(h.speed));h.sync||(h.speed=h.speed/2);var L=h.fx=="shuffle"?500:250;while(h.timeout-h.speed<L)h.timeout+=h.speed}h.easing&&(h.easeIn=h.easeOut=h.easing);h.speedIn||(h.speedIn=h.speed);h.speedOut||(h.speedOut=h.speed);h.slideCount=i.length;h.currSlide=h.lastSlide=y;if(h.random){++h.randomIndex==i.length&&(h.randomIndex=0);h.nextSlide=h.randomMap[h.randomIndex]}else h.backwards?h.nextSlide=h.startingSlide==0?i.length-1:h.startingSlide-1:h.nextSlide=h.startingSlide>=i.length-1?0:h.startingSlide+1;if(!h.multiFx){var A=e.fn.cycle.transitions[h.fx];if(e.isFunction(A))A(t,n,h);else if(h.fx!="custom"&&!h.multiFx){r("unknown transition: "+h.fx,"; slideshow terminating");return!1}}var O=n[y];h.before.length&&h.before[0].apply(O,[O,O,h,!0]);h.after.length>1&&h.after[1].apply(O,[O,O,h,!0]);h.next&&e(h.next).bind(h.prevNextEvent,function(){return d(h,h.rev?-1:1)});h.prev&&e(h.prev).bind(h.prevNextEvent,function(){return d(h,h.rev?1:-1)});(h.pager||h.pagerAnchorBuilder)&&v(i,h);l(h,i);return h}function a(t){t.original={before:[],after:[]};t.original.cssBefore=e.extend({},t.cssBefore);t.original.cssAfter=e.extend({},t.cssAfter);t.original.animIn=e.extend({},t.animIn);t.original.animOut=e.extend({},t.animOut);e.each(t.before,function(){t.original.before.push(this)});e.each(t.after,function(){t.original.after.push(this)})}function f(t){var i,s,o=e.fn.cycle.transitions;if(t.fx.indexOf(",")>0){t.multiFx=!0;t.fxs=t.fx.replace(/\s*/g,"").split(",");for(i=0;i<t.fxs.length;i++){var u=t.fxs[i];s=o[u];if(!s||!o.hasOwnProperty(u)||!e.isFunction(s)){r("discarding unknown transition: ",u);t.fxs.splice(i,1);i--}}if(!t.fxs.length){r("No valid transitions named; slideshow terminating.");return!1}}else if(t.fx=="all"){t.multiFx=!0;t.fxs=[];for(p in o){s=o[p];o.hasOwnProperty(p)&&e.isFunction(s)&&t.fxs.push(p)}}if(t.multiFx&&t.randomizeEffects){var a=Math.floor(Math.random()*20)+30;for(i=0;i<a;i++){var f=Math.floor(Math.random()*t.fxs.length);t.fxs.push(t.fxs.splice(f,1)[0])}n("randomized fx sequence: ",t.fxs)}return!0}function l(t,n){t.addSlide=function(r,i){var s=e(r),o=s[0];t.autostopCount||t.countdown++;n[i?"unshift":"push"](o);t.els&&t.els[i?"unshift":"push"](o);t.slideCount=n.length;s.css("position","absolute");s[i?"prependTo":"appendTo"](t.$cont);if(i){t.currSlide++;t.nextSlide++}!e.support.opacity&&t.cleartype&&!t.cleartypeNoBg&&m(s);t.fit&&t.width&&s.width(t.width);t.fit&&t.height&&t.height!="auto"&&$slides.height(t.height);o.cycleH=t.fit&&t.height?t.height:s.height();o.cycleW=t.fit&&t.width?t.width:s.width();s.css(t.cssBefore);(t.pager||t.pagerAnchorBuilder)&&e.fn.cycle.createPagerAnchor(n.length-1,o,e(t.pager),n,t);e.isFunction(t.onAddSlide)?t.onAddSlide(s):s.hide()}}function c(t,r,i,s){if(i&&r.busy&&r.manualTrump){n("manualTrump in go(), stopping active transition");e(t).stop(!0,!0);r.busy=!1}if(r.busy){n("transition active, ignoring new tx request");return}var o=r.$cont[0],u=t[r.currSlide],a=t[r.nextSlide];if(o.cycleStop!=r.stopCount||o.cycleTimeout===0&&!i)return;if(!i&&!o.cyclePause&&!r.bounce&&(r.autostop&&--r.countdown<=0||r.nowrap&&!r.random&&r.nextSlide<r.currSlide)){r.end&&r.end(r);return}var f=!1;if((i||!o.cyclePause)&&r.nextSlide!=r.currSlide){f=!0;var l=r.fx;u.cycleH=u.cycleH||e(u).height();u.cycleW=u.cycleW||e(u).width();a.cycleH=a.cycleH||e(a).height();a.cycleW=a.cycleW||e(a).width();if(r.multiFx){if(r.lastFx==undefined||++r.lastFx>=r.fxs.length)r.lastFx=0;l=r.fxs[r.lastFx];r.currFx=l}if(r.oneTimeFx){l=r.oneTimeFx;r.oneTimeFx=null}e.fn.cycle.resetState(r,l);r.before.length&&e.each(r.before,function(e,t){if(o.cycleStop!=r.stopCount)return;t.apply(a,[u,a,r,s])});var p=function(){e.each(r.after,function(e,t){if(o.cycleStop!=r.stopCount)return;t.apply(a,[u,a,r,s])})};n("tx firing; currSlide: "+r.currSlide+"; nextSlide: "+r.nextSlide);r.busy=1;r.fxFn?r.fxFn(u,a,r,p,s,i&&r.fastOnEvent):e.isFunction(e.fn.cycle[r.fx])?e.fn.cycle[r.fx](u,a,r,p,s,i&&r.fastOnEvent):e.fn.cycle.custom(u,a,r,p,s,i&&r.fastOnEvent)}if(f||r.nextSlide==r.currSlide){r.lastSlide=r.currSlide;if(r.random){r.currSlide=r.nextSlide;++r.randomIndex==t.length&&(r.randomIndex=0);r.nextSlide=r.randomMap[r.randomIndex];r.nextSlide==r.currSlide&&(r.nextSlide=r.currSlide==r.slideCount-1?0:r.currSlide+1)}else if(r.backwards){var d=r.nextSlide-1<0;if(d&&r.bounce){r.backwards=!r.backwards;r.nextSlide=1;r.currSlide=0}else{r.nextSlide=d?t.length-1:r.nextSlide-1;r.currSlide=d?0:r.nextSlide+1}}else{var d=r.nextSlide+1==t.length;if(d&&r.bounce){r.backwards=!r.backwards;r.nextSlide=t.length-2;r.currSlide=t.length-1}else{r.nextSlide=d?0:r.nextSlide+1;r.currSlide=d?t.length-1:r.nextSlide-1}}}f&&r.pager&&r.updateActivePagerLink(r.pager,r.currSlide,r.activePagerClass);var v=0;r.timeout&&!r.continuous?v=h(t[r.currSlide],t[r.nextSlide],r,s):r.continuous&&o.cyclePause&&(v=10);v>0&&(o.cycleTimeout=setTimeout(function(){c(t,r,0,!r.rev&&!r.backwards)},v))}function h(e,t,r,i){if(r.timeoutFn){var s=r.timeoutFn.call(e,e,t,r,i);while(s-r.speed<250)s+=r.speed;n("calculated timeout: "+s+"; speed: "+r.speed);if(s!==!1)return s}return r.timeout}function d(t,n){var r=t.elements,i=t.$cont[0],s=i.cycleTimeout;if(s){clearTimeout(s);i.cycleTimeout=0}if(t.random&&n<0){t.randomIndex--;--t.randomIndex==-2?t.randomIndex=r.length-2:t.randomIndex==-1&&(t.randomIndex=r.length-1);t.nextSlide=t.randomMap[t.randomIndex]}else if(t.random)t.nextSlide=t.randomMap[t.randomIndex];else{t.nextSlide=t.currSlide+n;if(t.nextSlide<0){if(t.nowrap)return!1;t.nextSlide=r.length-1}else if(t.nextSlide>=r.length){if(t.nowrap)return!1;t.nextSlide=0}}var o=t.onPrevNextEvent||t.prevNextClick;e.isFunction(o)&&o(n>0,t.nextSlide,r[t.nextSlide]);c(r,t,1,n>=0);return!1}function v(t,n){var r=e(n.pager);e.each(t,function(i,s){e.fn.cycle.createPagerAnchor(i,s,r,t,n)});n.updateActivePagerLink(n.pager,n.startingSlide,n.activePagerClass)}function m(t){function r(e){e=parseInt(e).toString(16);return e.length<2?"0"+e:e}function i(t){for(;t&&t.nodeName.toLowerCase()!="html";t=t.parentNode){var n=e.css(t,"background-color");if(n.indexOf("rgb")>=0){var i=n.match(/\d+/g);return"#"+r(i[0])+r(i[1])+r(i[2])}if(n&&n!="transparent")return n}return"#ffffff"}n("applying clearType background-color hack");t.each(function(){e(this).css("background-color",i(this))})}var t="2.88";e.support==undefined&&(e.support={opacity:!e.browser.msie});e.fn.cycle=function(t,s){var o={s:this.selector,c:this.context};if(this.length===0&&t!="stop"){if(!e.isReady&&o.s){r("DOM not ready, queuing slideshow");e(function(){e(o.s,o.c).cycle(t,s)});return this}r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var a=i(this,t,s);if(a===!1)return;a.updateActivePagerLink=a.updateActivePagerLink||e.fn.cycle.updateActivePagerLink;this.cycleTimeout&&clearTimeout(this.cycleTimeout);this.cycleTimeout=this.cyclePause=0;var f=e(this),l=a.slideExpr?e(a.slideExpr,this):f.children(),p=l.get();if(p.length<2){r("terminating; too few slides: "+p.length);return}var d=u(f,l,p,a,o);if(d===!1)return;var v=d.continuous?10:h(p[d.currSlide],p[d.nextSlide],d,!d.rev);if(v){v+=d.delay||0;v<10&&(v=10);n("first timeout: "+v);this.cycleTimeout=setTimeout(function(){c(p,d,0,!d.rev&&!a.backwards)},v)}})};e.fn.cycle.resetState=function(t,n){n=n||t.fx;t.before=[];t.after=[];t.cssBefore=e.extend({},t.original.cssBefore);t.cssAfter=e.extend({},t.original.cssAfter);t.animIn=e.extend({},t.original.animIn);t.animOut=e.extend({},t.original.animOut);t.fxFn=null;e.each(t.original.before,function(){t.before.push(this)});e.each(t.original.after,function(){t.after.push(this)});var r=e.fn.cycle.transitions[n];e.isFunction(r)&&r(t.$cont,e(t.elements),t)};e.fn.cycle.updateActivePagerLink=function(t,n,r){e(t).each(function(){e(this).children().removeClass(r).eq(n).addClass(r)})};e.fn.cycle.next=function(e){d(e,e.rev?-1:1)};e.fn.cycle.prev=function(e){d(e,e.rev?1:-1)};e.fn.cycle.createPagerAnchor=function(t,r,i,s,o){var u;if(e.isFunction(o.pagerAnchorBuilder)){u=o.pagerAnchorBuilder(t,r);n("pagerAnchorBuilder("+t+", el) returned: "+u)}else u='<a href="#">'+(t+1)+"</a>";if(!u)return;var a=e(u);if(a.parents("body").length===0){var f=[];if(i.length>1){i.each(function(){var t=a.clone(!0);e(this).append(t);f.push(t[0])});a=e(f)}else a.appendTo(i)}o.pagerAnchors=o.pagerAnchors||[];o.pagerAnchors.push(a);a.bind(o.pagerEvent,function(n){n.preventDefault();o.nextSlide=t;var r=o.$cont[0],i=r.cycleTimeout;if(i){clearTimeout(i);r.cycleTimeout=0}var u=o.onPagerEvent||o.pagerClick;e.isFunction(u)&&u(o.nextSlide,s[o.nextSlide]);c(s,o,1,o.currSlide<t)});!/^click/.test(o.pagerEvent)&&!o.allowPagerClickBubble&&a.bind("click.cycle",function(){return!1});o.pauseOnPagerHover&&a.hover(function(){o.$cont[0].cyclePause++},function(){o.$cont[0].cyclePause--})};e.fn.cycle.hopsFromLast=function(e,t){var n,r=e.lastSlide,i=e.currSlide;t?n=i>r?i-r:e.slideCount-r:n=i<r?r-i:r+e.slideCount-i;return n};e.fn.cycle.commonReset=function(t,n,r,i,s,o){e(r.elements).not(t).hide();r.cssBefore.opacity=1;r.cssBefore.display="block";i!==!1&&n.cycleW>0&&(r.cssBefore.width=n.cycleW);s!==!1&&n.cycleH>0&&(r.cssBefore.height=n.cycleH);r.cssAfter=r.cssAfter||{};r.cssAfter.display="none";e(t).css("zIndex",r.slideCount+(o===!0?1:0));e(n).css("zIndex",r.slideCount+(o===!0?0:1))};e.fn.cycle.custom=function(t,n,r,i,s,o){var u=e(t),a=e(n),f=r.speedIn,l=r.speedOut,c=r.easeIn,h=r.easeOut;a.css(r.cssBefore);if(o){typeof o=="number"?f=l=o:f=l=1;c=h=null}var p=function(){a.animate(r.animIn,f,c,i)};u.animate(r.animOut,l,h,function(){r.cssAfter&&u.css(r.cssAfter);r.sync||p()});r.sync&&p()};e.fn.cycle.transitions={fade:function(t,n,r){n.not(":eq("+r.currSlide+")").css("opacity",0);r.before.push(function(t,n,r){e.fn.cycle.commonReset(t,n,r);r.cssBefore.opacity=0});r.animIn={opacity:1};r.animOut={opacity:0};r.cssBefore={top:0,left:0}}};e.fn.cycle.ver=function(){return t};e.fn.cycle.defaults={fx:"fade",timeout:4e3,timeoutFn:null,continuous:0,speed:1e3,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:!1,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!e.support.opacity,cleartypeNoBg:!1,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:!0,requeueOnImageNotLoaded:!0,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null,backwards:!1}})(jQuery);